clc;
addpath(genpath(fullfile(pwd, 'test_functions')));

dimension = 7;

n_iterations = 1000;       % n_iterations
population_size = 10; % population_size >= 4
diff_weight = 1.5;     % diff_weight \in [0, 2]
cross_prob = 0.5;    % cross_prob \in [0,1]

% f_norm
lower_b = [-5.12, -5.12, -5.12, -5.12, -5.12, -5.12, -5.12];
upper_b = [ 5.11,  5.11,  5.11,  5.11,  5.11,  5.11,  5.11];

population = init_random(dimension, population_size, lower_b, upper_b);

fprintf('norm\n');

[optimal_agent, optimal_value, f_time] = differential_evolution(population, @f_norm, n_iterations, diff_weight, cross_prob);




%{
    3.2146   -3.5076    1.5882    2.1029   -0.6316   -2.2963    2.5655
    4.1463    4.8092   -4.7547   -4.7943   -1.2167    1.8334   -2.5104
   -3.8209    4.6718    3.5666   -2.2871    2.7112    1.5817    0.0559
    4.2238   -0.1546    4.4348   -4.6477    3.0149   -3.4565    2.0316
    1.3490    3.0669    1.8235   -4.1263   -3.2083   -3.9027    3.9939
   -4.1222   -3.6685    2.6317    3.3040   -0.1097   -0.0217    4.6936
   -2.2710   -0.8054    2.4822    1.9881   -0.5617    4.6982    0.4780
    0.4746    4.2480   -1.1075   -1.8761    1.4918   -1.6379   -3.7019
    4.6753    2.9843    1.5855    4.6008    2.1368    0.8673   -3.5927
    4.7508    4.6956   -3.3688   -4.7676    2.6004   -2.8304   -2.4857

norm

n iterations: 1000
diff_weight: 1.500000
cross_prob: 0.500000

number of function calls: 10010
Function call time 0.000000 sec.

First function value: 41.835036 

 function calls time average: 7.755544e-06 

 optimal value: 0.000002 

 optiml agent
   -0.0012   -0.0007   -0.0003    0.0005    0.0012   -0.0001    0.0002

population
    3.2146   -3.5076    1.5882    2.1029   -0.6316   -2.2963    2.5655
    0.0028   -0.0004    0.0004    0.0003   -0.0005    0.0020   -0.0003
   -0.0006   -0.0001    0.0011    0.0012   -0.0013   -0.0006    0.0018
    0.0017    0.0015   -0.0009   -0.0010    0.0011    0.0028    0.0011
   -0.0000    0.0002   -0.0005    0.0007    0.0011   -0.0001    0.0002
    0.0002   -0.0003    0.0011   -0.0018   -0.0005   -0.0013   -0.0013
   -0.0007   -0.0010    0.0002   -0.0014   -0.0011    0.0021   -0.0007
   -0.0000    0.0001   -0.0006   -0.0006    0.0011    0.0017    0.0006
    0.0003    0.0004   -0.0017   -0.0010   -0.0021    0.0022   -0.0003
    0.0007    0.0000   -0.0016   -0.0005    0.0012   -0.0020    0.0007
%}